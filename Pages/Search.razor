@page "/Search/{searchterm}"
@inject NavigationManager Nav
@inject Data Datas

<PageTitle>Search</PageTitle>
<MudPaper Class="d-flex flex-wrap justify-center"
          Style="background-color:transparent"
          Elevation="0"
          Width="100%" > 
    @foreach (var item in Datas.FilteredData)
    {
        <MudPaper @onclick="()=>GoToPage(item)" Style="background-color:transparent" Elevation="0">
            <Thumbnail VideoModel="@item" />
        </MudPaper>
    }

</MudPaper>


@code 
{ 
    [Parameter] public string Searchterm { get; set; } = string.Empty;

    protected override async Task OnInitializedAsync()
    {
        Datas.OnChange += StateHasChanged;

        //await Datas.InitializeAsync();
        //await Datas.GetFilteredVideos(searchterm);
    }

    public void Dispose()
    {
        Datas.OnChange -= StateHasChanged;
    }
    public void GoToPage(Video video)
    { 
        Nav.NavigateTo($"playmedia/{video.Id}");
    }
}
